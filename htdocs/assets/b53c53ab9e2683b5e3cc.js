"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[99638],{334007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.ConflictError=void 0;t.sync=function(e,t,r){return p.apply(this,arguments)};var n=i(r(636602)),u=i(r(791548)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}(r(324033)),o=r(770348);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,u,l,o){try{var a=e[l](o),i=a.value}catch(e){r(e);return}
a.done?t(i):Promise.resolve(i).then(n,u)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var l=e.apply(t,r);function o(e){s(l,n,u,o,a,"next",e)}function a(e){s(l,n,u,o,a,"throw",e)}o(void 0)}))}}var d=new u.default("CloudSync"),f=function(e){this.message=e};t.ConflictError=f;function p(){return(p=c(regeneratorRuntime.mark((function e(t,r,u){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===u&&(u=null);n.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_START,applicationId:t,branchId:r});e.prev=2;e.next=5;return l.syncApplication(t,r,u);case 5:if((a=e.sent).type!==o.CloudSyncResultTypes.CONFLICT){e.next=11;break}n.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_CONFLICT,applicationId:t,branchId:r,next:a.next,remote:a.remote});throw new f("Conflict in cloud sync.");case 11:a.type!==o.CloudSyncResultTypes.PULL&&a.type!==o.CloudSyncResultTypes.PUSH||d.info("Sync complete",a);case 12:e.next=21
;break;case 14:e.prev=14;e.t0=e.catch(2);if(!(e.t0 instanceof f)){e.next=18;break}throw e.t0;case 18:n.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_ERROR,applicationId:t,branchId:r});d.error("Failed to cloud sync:",e.t0);throw new Error("Failed to cloud sync.");case 21:n.default.dispatch({type:o.ActionTypes.GAME_CLOUD_SYNC_COMPLETE,applicationId:t,branchId:r});return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}},505437:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,u=(n=r(636602))&&n.__esModule?n:{default:n},l=r(770348);var o={updateChannelDimensions:function(e,t,r,n,o){u.default.wait((function(){u.default.dispatch({type:l.ActionTypes.UPDATE_CHANNEL_DIMENSIONS,channelId:e,scrollTop:t,scrollHeight:r,offsetHeight:n});null!=o&&o()}))},updateChannelListScroll:function(e,t){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTop:t})},
channelListScrollTo:function(e,t){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:t})},clearChannelListScrollTo:function(e){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:null})},clearChannelDimensions:function(e,t){this.updateChannelDimensions(e,null,null,null,t)},updateGuildListScrollTo:function(e){u.default.dirtyDispatch({type:l.ActionTypes.UPDATE_GUILD_LIST_DIMENSIONS,scrollTop:e})}};t.default=o},107974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.playApplication=M;var n,u=O(r(667294)),l=T(r(730381)),o=T(r(536211)),a=O(r(334007)),i=T(r(234161)),s=T(r(288356)),c=T(r(223367)),d=T(r(956117)),f=T(r(530250)),p=T(r(662197)),y=r(3400),h=r(194322),_=T(r(308920)),v=r(770348),m=T(r(247001)),A=T(r(184804)),C=T(r(380203));function T(e){return e&&e.__esModule?e:{default:e}}function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(R=function(e){
return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=R(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}function E(){E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return E.apply(this,arguments)}function g(e,t,r,n,u,l,o){try{var a=e[l](o),i=a.value}catch(e){r(e);return}a.done?t(i):Promise.resolve(i).then(n,u)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var l=e.apply(t,r);function o(e){g(l,n,u,o,a,"next",e)}function a(e){g(l,n,u,o,a,"throw",e)}o(void 0)}))}}
function S(e,t,r,u){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=u;else if(o>1){for(var a=new Array(o),i=0;i<o;i++)a[i]=arguments[i+3];t.children=a}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var N=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;b(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];(t=e.call.apply(e,[this].concat(n))||this).onClose=function(){t.props.onClose()};t.handlePlay=function(e,r){void 0===e&&(e=!0);void 0===r&&(r=null);var n=t.props,u=n.libraryApplication,l=n.analyticsParams;t.onClose();M(u.id,u,{analyticsParams:l,cloudSync:e,cloudSyncForceHash:r})}
;t.handleChooseDownload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.remote.hash)};t.handleChooseUpload=function(){var e=t.props.cloudSyncState;e.type===v.CloudSyncStateTypes.CONFLICT&&t.handlePlay(!0,e.next.hash)};return t}var r=t.prototype;r.renderConflictButton=function(e,t,r,n){return S(d.default,{className:A.default.conflictButton,innerClassName:A.default.conflictButtonInner,onClick:n},void 0,S("div",{className:r}),S("div",{className:A.default.buttonBody},void 0,S("div",{className:A.default.conflictTitle},void 0,e),S("div",{},void 0,m.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_LAST_MODIFIED),S("div",{className:A.default.timestamp},void 0,(0,l.default)(t).calendar())))};r.renderError=function(){var e=this,t=this.props.application;return S(u.Fragment,{},void 0,S(y.ModalContent,{},void 0,S(f.default,{justify:f.default.Justify.CENTER},void 0,S("div",{className:A.default.errorArt})),S("div",{className:A.default.description
},void 0,m.default.Messages.CLOUD_SYNC_MODAL_ERROR_DESCRIPTION.format({applicationName:t.name}))),S(y.ModalFooter,{},void 0,S(f.default,{justify:f.default.Justify.BETWEEN},void 0,S(d.default,{className:A.default.linkButton,size:A.default.linkButtonSize,look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:this.onClose},void 0,m.default.Messages.CANCEL),S(f.default,{direction:f.default.Direction.HORIZONTAL,justify:f.default.Justify.END},void 0,S(d.default,{look:d.default.Looks.LINK,color:d.default.Colors.PRIMARY,onClick:function(){return e.handlePlay()},className:A.default.retryButton},void 0,m.default.Messages.RETRY),S(d.default,{onClick:function(){return e.handlePlay(!1)}},void 0,m.default.Messages.GAME_ACTION_BUTTON_PLAY)))))};r.renderConflict=function(){var e=this.props,t=e.application,r=e.cloudSyncState;if(r.type!==v.CloudSyncStateTypes.CONFLICT)throw new Error("Cannot render conflict for non conflict type");return S(y.ModalContent,{className:C.default.marginBottom20
},void 0,S("div",{className:A.default.description},void 0,m.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_DESCRIPTION.format({applicationName:t.name})),this.renderConflictButton(m.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_DOWNLOAD,r.remote.timestamp,A.default.conflictDownloadArt,this.handleChooseDownload),S(f.default,{className:A.default.choiceWrapper,align:f.default.Align.CENTER},void 0,S("div",{className:A.default.choiceLine}),S("div",{className:A.default.choiceTitle},void 0,m.default.Messages.CLOUD_SYNC_MODAL_OR),S("div",{className:A.default.choiceLine})),this.renderConflictButton(m.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_UPLOAD,r.next.timestamp,A.default.conflictUploadArt,this.handleChooseUpload))};r.render=function(){var e=this.props,t=e.cloudSyncState,r=e.transitionState,n=t.type===v.CloudSyncStateTypes.CONFLICT?m.default.Messages.CLOUD_SYNC_MODAL_CONFLICT_HEADER:m.default.Messages.CLOUD_SYNC_MODAL_ERROR_HEADER;return S(y.ModalRoot,{transitionState:r,
className:A.default.modal,"aria-label":n},void 0,S(y.ModalHeader,{separator:!1},void 0,S(y.ModalCloseButton,{className:A.default.closeButton,onClick:this.onClose}),S(p.default,{tag:p.default.Tags.H2,className:C.default.marginReset},void 0,n)),t.type===v.CloudSyncStateTypes.CONFLICT?this.renderConflict():this.renderError())};return t}(u.PureComponent);N.displayName="CloudSyncResolutionModal";var L=o.default.connectStores([c.default,s.default],(function(e){var t=e.libraryApplication,r=e.branchId;return{cloudSyncState:c.default.getState(t.id,r),application:s.default.getGame(t.id)}}))(N);function M(e,t,r){return P.apply(this,arguments)}function P(){return(P=I(regeneratorRuntime.mark((function e(t,r,n){var l,o,c,d,f,p,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(l=s.default.getGame(t))){e.next=3;break}return e.abrupt("return");case 3:o=n.cloudSync,c=void 0===o||o,d=n.cloudSyncForceHash,f=void 0===d?null:d,p=n.analyticsParams;if(!c||null==r){
e.next=15;break}y=r.branchId;e.prev=6;e.next=9;return a.sync(r.id,y,f);case 9:e.next=15;break;case 11:e.prev=11;e.t0=e.catch(6);(0,h.openModal)((function(e){return u.createElement(L,E({libraryApplication:r,analyticsParams:p,branchId:y},e))}));return e.abrupt("return");case 15:_.default.track(v.AnalyticEvents.APPLICATION_OPENED,E({application_id:l.id,application_name:l.name,type:v.AnalyticsGameOpenTypes.LAUNCH,distributor:null!=r?r.getDistributor():null},p));return e.abrupt("return",i.default.launch(l.id,null==r?void 0:r.branchId));case 17:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}},221107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.QUICKSWITCHER_SHOW=void 0;var n=r(835282),u=o(r(423046)),l=o(r(122913));function o(e){return e&&e.__esModule?e:{default:e}}var a={binds:["mod+k","mod+t"],comboKeysBindGlobal:!0,action:function(){if(u.default.isGuest())return!1;l.default.hasLayers()||(0,n.show)();return!1}};t.QUICKSWITCHER_SHOW=a},
497677:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.TOGGLE_HOTKEYS=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=u?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}(r(499816)),u=r(194322),l=r(140020);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var a={binds:["mod+/","mod+shift+/"],comboKeysBindGlobal:!0,action:function(){(0,u.hasModalOpen)(l.KEYBOARD_SHORTCUT_MODAL_KEY)?n.hide():n.show();return!1}};t.TOGGLE_HOTKEYS=a;var i={TOGGLE_HOTKEYS:a};t.default=i},925689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.default=void 0;var n=R(r(496486)),u=R(r(120053)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}(r(567186)),o=R(r(539563)),a=R(r(676614)),i=R(r(644263)),s=R(r(126208)),c=r(517286),d=R(r(290629)),f=R(r(728429)),p=R(r(424956)),y=r(71246),h=R(r(895201)),_=R(r(608417)),v=R(r(942192)),m=R(r(74978)),A=r(176548),C=r(770348);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}function O(){O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]
;for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return O.apply(this,arguments)}function E(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=I(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){if(e){if("string"==typeof e)return S(e,t)
;var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return(0,n.default)(e).sort(m.default).take(t).value()}var N=Object.freeze({});function L(e,t){void 0===e&&(e=0);return 1e3*e*(null!=t?t:1)}function M(e,t){if(!t.frecencyBoosters)return{};var r=s.default.getFrequently(),n=r.reduce((function(e,t){var r=t.id,n=s.default.getScore(r);return n>e?n:e}),0),u=[];switch(e){case A.AutocompleterResultTypes.GUILD:u=r.filter((function(e){return e instanceof o.default}));break;case A.AutocompleterResultTypes.USER:u=r.filter((function(e){return e instanceof l.default&&e.type===C.ChannelTypes.DM}));break;case A.AutocompleterResultTypes.GROUP_DM:u=r.filter((function(e){
return e instanceof l.default&&e.isMultiUserDM()}));break;case A.AutocompleterResultTypes.TEXT_CHANNEL:u=r.filter((function(e){return e instanceof l.default&&(0,l.isGuildSelectableChannelType)(e.type)}));break;case A.AutocompleterResultTypes.VOICE_CHANNEL:u=r.filter((function(e){return e instanceof l.default&&e.isVocal()}))}for(var a,c={},f=g(u);!(a=f()).done;){var p=a.value,y=p.id,h=s.default.getScore(y);if(e===A.AutocompleterResultTypes.USER&&p instanceof l.default){if(p.type===C.ChannelTypes.DM)c[y=p.getRecipientId()]=1+h/n;else if(p.type===C.ChannelTypes.GROUP_DM)for(var _,v=p.recipients.length,m=g(p.recipients);!(_=m()).done;){c[_.value]=1+h/n*(1/v)}}else c[y]=1+h/n}for(var T,R=g(d.default.getFriendIDs());!(T=R()).done;){var O,E=T.value;c[E]=(null!==(O=c[E])&&void 0!==O?O:1)+.2}for(var I,S=g(i.default.getDMUserIds());!(I=S()).done;){var b,N=I.value;c[N]=(null!==(b=c[N])&&void 0!==b?b:1)+.1}return c}var P=function(){function e(e,t,r,u){var l=this;void 0===r&&(r=100)
;void 0===u&&(u=N);this.query="";this.options=N;this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[];this._userBlacklist=null;this.mapUserResult=function(e){var t=e.user,r=e.id,n=e.score,u=e.comparator;null==t&&(t=f.default.getUser(r));return null==t?null:{type:A.AutocompleterResultTypes.USER,record:t,score:L(n),comparator:u}};this.parseUserResults=function(e){var t=e.results;if(l._include(A.AutocompleterResultTypes.USER)){l._userResults=t.map(l.mapUserResult).filter(y.isNotNullish);l._userResults.length>l._limit&&(l._userResults.length=l._limit);l.updateAllResults()}};this.updateAllResults=function(){clearTimeout(l._asyncTimeout);l.results=(0,n.default)([].concat(E(l._userResults),E(l._groupDMResults),E(l._textChannelResults),E(l._voiceChannelResults),E(l._guildResults),E(l._linkResults))).uniqBy((function(e){return e.type+"-"+e.record.id
})).sort(m.default).value();l.onResultsChange(l.results,l.query)};this.onResultsChange=e;this.setOptions(u,!0);this._limit=r;this.userSearchContext=v.default.getSearchContext(this.parseUserResults,r);this.setResultTypes(t)}var t=e.prototype;t.setLimit=function(e){var t=this.userSearchContext;this._limit=e;null!=t&&t.setLimit(e);this._userResults.length>this._limit&&(this._userResults.length=this._limit);this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit);this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit);this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit);this._guildResults.length>this._limit&&(this._guildResults.length=this._limit);this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit);this._linkResults.length>this._limit&&(this._linkResults.length=this._limit)};t.setResultTypes=function(e){this.resultTypes=null!=e?new Set(e):null
;this._userResults=this._include(A.AutocompleterResultTypes.USER)?this._userResults:[];this._groupDMResults=this._include(A.AutocompleterResultTypes.GROUP_DM)?this._groupDMResults:[];this._textChannelResults=this._include(A.AutocompleterResultTypes.TEXT_CHANNEL)?this._textChannelResults:[];this._voiceChannelResults=this._include(A.AutocompleterResultTypes.VOICE_CHANNEL)?this._voiceChannelResults:[];this._guildResults=this._include(A.AutocompleterResultTypes.GUILD)?this._guildResults:[];this._applicationResults=this._include(A.AutocompleterResultTypes.APPLICATION)?this._applicationResults:[];this._linkResults=this._include(A.AutocompleterResultTypes.LINK)?this._linkResults:[]};t._include=function(e){return null==this.resultTypes||this.resultTypes.has(e)};t._isAsyncSearch=function(){return this._include(A.AutocompleterResultTypes.USER)};t.setOptions=function(e,t){void 0===t&&(t=!1);this.options=t?O({},this.options,{},e):e
;null!=this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map((function(e){return e.startsWith("user:")?e.replace("user:",""):""})).filter((function(e){return""!==e})):this._userBlacklist=null};t.search=function(e,t){this.query=e;if(""!==e.trim()){this.queryUsers(e,t,this._limit);this._groupDMResults=this.queryGroupDMs(e,this._limit);this._textChannelResults=this.queryTextChannels(e,this._limit);this._voiceChannelResults=this.queryVoiceChannels(e,this._limit);this._guildResults=this.queryGuilds(e,this._limit);this._applicationResults=this.queryApplications(e,this._limit);this._linkResults=this.queryLink(e,this._limit);if(this._isAsyncSearch()){clearTimeout(this._asyncTimeout);this._asyncTimeout=setTimeout(this.updateAllResults,300)}else this.updateAllResults()}else{this.clear();this.updateAllResults()}};t.clear=function(){var e=this.userSearchContext;null!=e&&e.clearQuery();this.results=[];this._userResults=[];this._groupDMResults=[]
;this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[]};t.destroy=function(){var e=this.userSearchContext;if(null!=e){e.destroy();this.userSearchContext=null}};t.queryTextChannels=function(e,t){if(!this._include(A.AutocompleterResultTypes.TEXT_CHANNEL))return[];var r=M(A.AutocompleterResultTypes.TEXT_CHANNEL,this.options),n=this.options.blacklist,u=null!=n?function(e){return!n.has("channel:"+e.id)}:void 0;return b(p.default.queryChannels(e,null,1/0,!0,u).map((function(e){var t=e.channel,n=e.score,u=e.comparator;return{type:A.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:L(n,r[t.id]),comparator:u}})),t)};t.queryVoiceChannels=function(e,t){if(!this._include(A.AutocompleterResultTypes.VOICE_CHANNEL))return[];var r=this.options.voiceChannelGuildFilter;if(void 0===r)return[];var n=M(A.AutocompleterResultTypes.VOICE_CHANNEL,this.options);return b(p.default.queryChannels(e,r,1/0,!0,(function(){return!0
}),c.GUILD_VOCAL_CHANNELS_KEY).map((function(e){var t=e.channel,r=e.score,u=e.comparator;return{type:A.AutocompleterResultTypes.VOICE_CHANNEL,record:t,score:L(r,n[t.id]),comparator:u}})),t)};t.queryGuilds=function(e,t){if(!this._include(A.AutocompleterResultTypes.GUILD))return[];var r=M(A.AutocompleterResultTypes.GUILD,this.options),n=this.options.blacklist,u=null!=n?function(e){return!n.has("guild:"+e.id)}:void 0;return b(p.default.queryGuilds(e,1/0,!0,u).map((function(e){var t=e.guild,n=e.score,u=e.comparator;return{type:A.AutocompleterResultTypes.GUILD,record:t,score:L(n,r[t.id]),comparator:u}})),t)};t.queryUsers=function(e,t,r){var n=this.userSearchContext;if(null!=n&&this._include(A.AutocompleterResultTypes.USER)){var u=this.options.userFilters;void 0!==t&&h.default.requestMembers(t,e,100);n.setLimit(r);n.setQuery(e,u,this._userBlacklist,M(A.AutocompleterResultTypes.USER,this.options))}};t.queryGroupDMs=function(e,t){if(!this._include(A.AutocompleterResultTypes.GROUP_DM))return[]
;var r=this.options.blacklist,n=M(A.AutocompleterResultTypes.GROUP_DM,this.options),u=null!=r?function(e){return!r.has("channel:"+e.id)}:void 0;return b(p.default.queryGroupDMs(e,1/0,!0,u).map((function(e){var t=e.channel,r=e.score,u=e.comparator;return{type:A.AutocompleterResultTypes.GROUP_DM,record:t,score:L(r,n[t.id]),comparator:u}})),t)};t.queryApplications=function(e,t){return this._include(A.AutocompleterResultTypes.APPLICATION)?b(p.default.queryApplications(e,1/0,!0).map((function(e){var t=e.application,r=e.score,n=e.comparator;return{type:A.AutocompleterResultTypes.APPLICATION,record:t,score:L(r),comparator:n}})),t):[]};t.queryLink=function(e,t){if(!this._include(A.AutocompleterResultTypes.LINK))return[];var r,n=u.default.sanitizeUrl(e);try{r=new URL(n)}catch(e){return[]}var l=r,o=l.pathname,i=l.hostname,s=void 0===i?"":i,c=l.host,d=_.default.isDiscordHostname(s)||window.location.host===c;return null!==o&&d&&_.default.isAppRoute(o)?b([{type:A.AutocompleterResultTypes.LINK,
record:a.default.fromPath(o),score:1}],t):[]};return e}();t.default=P},176548:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.HeaderRecord=t.FindResultDirections=t.AutocompleterResultTypes=t.AutocompleterQuerySymbols=void 0;var n,u=(n=r(213192))&&n.__esModule?n:{default:n};t.HeaderRecord=function(e){this.id=e;this.text=e};var l,o,a=(0,u.default)({UP:null,DOWN:null});t.FindResultDirections=a;t.AutocompleterResultTypes=l;!function(e){e.GUILD="GUILD";e.TEXT_CHANNEL="TEXT_CHANNEL";e.GROUP_DM="GROUP_DM";e.VOICE_CHANNEL="VOICE_CHANNEL";e.USER="USER";e.HEADER="HEADER";e.APPLICATION="APPLICATION";e.LINK="LINK"}(l||(t.AutocompleterResultTypes=l={}));t.AutocompleterQuerySymbols=o;!function(e){e.USER="@";e.TEXT_CHANNEL="#";e.VOICE_CHANNEL="!";e.GUILD="*";e.APPLICATION="$"}(o||(t.AutocompleterQuerySymbols=o={}))},22324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.createHeaderResult=function(e){return{type:n.AutocompleterResultTypes.HEADER,record:new n.HeaderRecord(e),
score:0}};var n=r(176548)},10018:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,r,u,l){var o=u.length,a=l,i=r;if(0===o)return 0;if(null==a)a=i;else if(a===i)return i;if((i+=t===n.FindResultDirections.UP?-1:1)<0||i>=o)return e(t,i<0?o:-1,u,a);if(u[i].type===n.AutocompleterResultTypes.HEADER)return e(t,i,u,a);return i};var n=r(176548)},707791:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={createHeaderResult:!0,findNextSelectedResult:!0,sortByMatchScore:!0};Object.defineProperty(t,"createHeaderResult",{enumerable:!0,get:function(){return o.createHeaderResult}});t.default=void 0;Object.defineProperty(t,"findNextSelectedResult",{enumerable:!0,get:function(){return a.default}});Object.defineProperty(t,"sortByMatchScore",{enumerable:!0,get:function(){return i.default}});var u=s(r(925689)),l=r(176548);Object.keys(l).forEach((function(e){
"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var o=r(22324),a=s(r(10018)),i=s(r(74978));function s(e){return e&&e.__esModule?e:{default:e}}var c=u.default;t.default=c},749666:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.PRETTY_KEYS=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n)}(r(667294));var n,u=a(r(294184)),l=a(r(14096)),o=a(r(661505));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!=typeof WeakMap)return null
;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t,r,u){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=u;else if(o>1){for(var a=new Array(o),i=0;i<o;i++)a[i]=arguments[i+3];t.children=a}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var c="up",d="right",f="down",p="left",y=s("g",{fill:"#FFFFFF"},void 0,s("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),h=function(e){var t=e.direction,r=void 0===t?c:t;return s("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,u.default)(o.default.bindArrow,o.default[r])
},void 0,y)};h.displayName="ArrowSVG";var _={mod:function(){return l.default.modKey},alt:function(){return l.default.altKey},up:function(){return s(h,{direction:c})},down:function(){return s(h,{direction:f})},left:function(){return s(h,{direction:p})},right:function(){return s(h,{direction:d})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},plus:function(){return"+"},return:function(){return l.default.returnKey}};t.PRETTY_KEYS=_;var v=function(e){var t=e.shortcut,r=e.className;return s("div",{className:(0,u.default)(o.default.keybindShortcut,r)},void 0,t.split("+").map((function(e){return _[e]?_[e]():e})).map((function(e,t){return s("span",{},t,e)})))};v.displayName="KeyboardShortcut";var m=v;t.default=m},499816:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.hide=function(){u.default.dispatch({type:l.ActionTypes.HIDE_KEYBOARD_SHORTCUTS})};t.show=function(){u.default.dispatch({
type:l.ActionTypes.SHOW_KEYBOARD_SHORTCUTS})};var n,u=(n=r(636602))&&n.__esModule?n:{default:n},l=r(770348)},140020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.KEYBOARD_SHORTCUT_MODAL_KEY=void 0;t.KEYBOARD_SHORTCUT_MODAL_KEY="KEYBOARD_SHORTCUT_MODAL_KEY"},835282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getQuickSwitcherOptions=N;t.hide=U;t.search=function(e){u.default.dispatch(R({type:C.ActionTypes.QUICKSWITCHER_SEARCH},N(e)))};t.selectResult=function(e){u.default.dispatch({type:C.ActionTypes.QUICKSWITCHER_SELECT,selectedIndex:e})};t.show=D;t.switchToResult=function(e){P();M(C.AnalyticEvents.QUICKSWITCHER_RESULT_SELECTED,e);var t,r=e.type,n=e.record,f={page:C.AnalyticsPages.QUICK_SWITCHER};switch(r){case i.AutocompleterResultTypes.GUILD:var _=h.default.getChannelId(n.id);null!=_&&(0,c.transitionTo)(C.Routes.CHANNEL(n.id,_),{state:{analyticsSource:f}});break;case i.AutocompleterResultTypes.TEXT_CHANNEL:null!=(t=p.default.getChannel(n.id))&&(0,
d.transitionToChannel)(t.id,{state:{analyticsSource:f}});break;case i.AutocompleterResultTypes.VOICE_CHANNEL:null!=(t=p.default.getChannel(n.id))&&a.default.selectVoiceChannel(n.id);break;case i.AutocompleterResultTypes.USER:l.default.openPrivateChannel([n.id]);o.default.channelListScrollTo(C.ME,n.id);break;case i.AutocompleterResultTypes.GROUP_DM:(0,c.transitionToGuild)(C.ME,n.id);o.default.channelListScrollTo(C.ME,n.id);break;case i.AutocompleterResultTypes.APPLICATION:var v=y.default.getActiveLibraryApplication(n.id);g(n.id,v,{analyticsParams:{source:C.AnalyticsLocations.QUICK_SWITCHER,location:C.AnalyticsLocations.QUICK_SWITCHER}});break;case i.AutocompleterResultTypes.LINK:(0,s.default)(n.path)}u.default.dispatch({type:C.ActionTypes.QUICKSWITCHER_SWITCH_TO,result:e})};t.toggle=function(e){void 0===e&&(e="KEYBIND");A.default.isOpen()?U():D(e)};t.trackClose=M;t.trackOpen=L
;var n,u=T(r(636602)),l=T(r(709403)),o=T(r(505437)),a=T(r(136873)),i=r(707791),s=T(r(187295)),c=r(139982),d=r(391869),f=T(r(567186)),p=T(r(644263)),y=T(r(191839)),h=T(r(211136)),_=T(r(790597)),v=T(r(308920)),m=T(r(424115)),A=T(r(523946)),C=r(770348);function T(e){return e&&e.__esModule?e:{default:e}}function R(){R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return R.apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,u,l=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done);o=!0){l.push(n.value);if(t&&l.length===t)break}}catch(e){a=!0;u=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw u}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t)
;var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(){return Promise.resolve()},I=r(409873);g=I.playApplication;var S=Object.freeze(((n={})[i.AutocompleterQuerySymbols.USER]=i.AutocompleterResultTypes.USER,n[i.AutocompleterQuerySymbols.TEXT_CHANNEL]=i.AutocompleterResultTypes.TEXT_CHANNEL,n[i.AutocompleterQuerySymbols.VOICE_CHANNEL]=i.AutocompleterResultTypes.VOICE_CHANNEL,n[i.AutocompleterQuerySymbols.GUILD]=i.AutocompleterResultTypes.GUILD,
n[i.AutocompleterQuerySymbols.APPLICATION]=i.AutocompleterResultTypes.APPLICATION,n)),b=new RegExp("^"+i.AutocompleterQuerySymbols.USER+"|"+i.AutocompleterQuerySymbols.TEXT_CHANNEL+"|"+i.AutocompleterQuerySymbols.VOICE_CHANNEL+"|\\"+i.AutocompleterQuerySymbols.GUILD+"|\\"+i.AutocompleterQuerySymbols.APPLICATION);function N(e){var t=function(e){var t,r=e.charAt(0),n=null!==(t=S[r])&&void 0!==t?t:null;return[e.replace(b,""),n]}(e),r=O(t,2);return{query:r[0],queryMode:r[1]}}function L(e){if(!A.default.isOpen()){var t,r=_.default.getGuildId(),n=h.default.getChannelId(r);if(null!=n){var u=p.default.getChannel(n);t=null!=u?u.type:null}v.default.track(C.AnalyticEvents.QUICKSWITCHER_OPENED,{source:e,current_guild_id:r,current_channel_id:n,current_channel_type:t})}}function M(e,t){var r=A.default.getProps(),n=r.results,u=r.queryMode,l=r.query,o=r.maxQueryLength,a=_.default.getGuildId(),s=h.default.getChannelId(a),c=n[(0,
i.findNextSelectedResult)(i.FindResultDirections.DOWN,-1,n)],d=m.default.isEmail(l),y=m.default.isPhoneNumber(l),C=m.default.isUserTagLike(l),T={current_channel_id:s,current_guild_id:a,query_mode:null!=u?u:"GENERAL",query_length:l.length,max_query_length:o,is_email_like:d,is_phone_like:y,is_username_like:C,query:d||y||C?null:l,top_result_type:null!=c?c.type:null,top_result_score:null!=c?c.score:null,num_results_total:A.default.getResultTotals(),num_results_users:A.default.getResultTotals(i.AutocompleterResultTypes.USER),num_results_text_channels:A.default.getResultTotals(i.AutocompleterResultTypes.TEXT_CHANNEL),num_results_voice_channels:A.default.getResultTotals(i.AutocompleterResultTypes.VOICE_CHANNEL),num_results_guilds:A.default.getResultTotals(i.AutocompleterResultTypes.GUILD),num_results_group_dms:A.default.getResultTotals(i.AutocompleterResultTypes.GROUP_DM)};if(null!=s){var R=p.default.getChannel(s);T.current_channel_type=null!=R?R.type:null}if(null!=t){
var O=t.type,E=t.score,g=t.record;T.selected_type=O;T.selected_score=E;T.selected_index=n.indexOf(t);switch(O){case i.AutocompleterResultTypes.GUILD:T.selected_guild_id=g.id;break;case i.AutocompleterResultTypes.TEXT_CHANNEL:case i.AutocompleterResultTypes.VOICE_CHANNEL:g instanceof f.default&&(T.selected_guild_id=null!=g.guild_id?g.guild_id:null);T.selected_channel_id=g.id;break;case i.AutocompleterResultTypes.GROUP_DM:T.selected_channel_id=g.id;break;case i.AutocompleterResultTypes.USER:T.selected_user_id=g.id}}v.default.track(e,T)}function P(){u.default.dispatch({type:C.ActionTypes.QUICKSWITCHER_HIDE})}function D(e,t){void 0===e&&(e="KEYBIND");void 0===t&&(t="");L(e);u.default.dispatch(R({type:C.ActionTypes.QUICKSWITCHER_SHOW},N(t)))}function U(){M(C.AnalyticEvents.QUICKSWITCHER_CLOSED);P()}},523946:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;t.generateResultFromId=Y
;var n,u=P(r(496486)),l=P(r(972247)),o=P(r(636602)),a=M(r(707791)),i=r(678928),s=P(r(19566)),c=r(567186),d=P(r(423046)),f=P(r(644263)),p=M(r(687549)),y=M(r(517286)),h=P(r(876874)),_=P(r(30098)),v=P(r(689389)),m=P(r(191391)),A=P(r(290629)),C=P(r(211136)),T=P(r(790597)),R=P(r(563621)),O=P(r(871778)),E=P(r(728429)),g=P(r(298698)),I=P(r(424956)),S=r(71246),b=r(770348),N=P(r(247001));function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(L=function(e){return e?r:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=L(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}function P(e){return e&&e.__esModule?e:{
default:e}}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return D(e,t)}function U(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H,j="seenQSTutorial",k=0,G=!1,W=!1,x=null,K=[],F=null,Q=0;function Y(e){var t,r,n=f.default.getChannel(e)
;if(null==n)return null;switch(n.type){case b.ChannelTypes.DM:if(null!=x&&x!==a.AutocompleterResultTypes.USER)return null;r=a.AutocompleterResultTypes.USER;t=(0,i.computeChannelName)(n,E.default,A.default);return null==(n=E.default.getUser(n.getRecipientId()))?null:{type:r,record:n,score:0,comparator:t};case b.ChannelTypes.GROUP_DM:return null!=x&&x!==a.AutocompleterResultTypes.GROUP_DM?null:{type:r=a.AutocompleterResultTypes.GROUP_DM,record:n,score:0,comparator:t=(0,i.computeChannelName)(n,E.default,A.default)};default:return null!=x&&x!==a.AutocompleterResultTypes.TEXT_CHANNEL?null:{type:r=a.AutocompleterResultTypes.TEXT_CHANNEL,record:n,score:0,comparator:t=(0,i.computeChannelName)(n,E.default,A.default)}}}function q(){var e=T.default.getGuildId()||void 0,t=C.default.getChannelId()||void 0,r=C.default.getLastSelectedChannelId()||void 0;switch(x){case a.AutocompleterResultTypes.USER:var n=d.default.getId();return I.default.getRecentlyTalked(t,100).filter((function(e){
return e.user.id!==n})).map((function(e){var t=e.user,r=e.comparator,n=e.score;return{type:a.AutocompleterResultTypes.USER,record:t,score:n,comparator:r}}));case a.AutocompleterResultTypes.APPLICATION:return I.default.queryApplications("",100,!0).map((function(e){var t=e.application,r=e.score,n=e.comparator;return{type:a.AutocompleterResultTypes.APPLICATION,record:t,score:r,comparator:n}}));case a.AutocompleterResultTypes.GUILD:return I.default.queryGuilds("",100,!0).map((function(e){var t=e.guild,r=e.score,n=e.comparator;return{type:a.AutocompleterResultTypes.GUILD,record:t,score:r,comparator:n}}));case a.AutocompleterResultTypes.TEXT_CHANNEL:return I.default.queryChannels("",T.default.getGuildId(),100,!0).map((function(e){var t=e.channel,r=e.score,n=e.comparator;return{type:a.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:r,comparator:n}}));case a.AutocompleterResultTypes.VOICE_CHANNEL:return I.default.queryChannels("",T.default.getGuildId(),100,!0,(function(){return!0
}),y.GUILD_VOCAL_CHANNELS_KEY).map((function(e){var t=e.channel,r=e.score,n=e.comparator;return{type:a.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:r,comparator:n}}))}var l=[];if(r){var o=Y(r);null!=o&&(o.type!==a.AutocompleterResultTypes.TEXT_CHANNEL&&o.type!==a.AutocompleterResultTypes.VOICE_CHANNEL||v.default.can(b.Permissions.VIEW_CHANNEL,o.record))&&l.push((0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_LAST_CHANNEL),o)}var i=function(e){var t=[];p.default.getRecentlyEditedDrafts(p.DraftType.ChannelMessage).forEach((function(r){var n=r.channelId;if(!e(n)){var u=Y(n);null!=u&&t.push(u)}}));return t}((function(e){return e===t||e===r}));if(i.length>0){var c;(c=l).push.apply(c,[(0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_DRAFTS)].concat(U(i)))}var h=(0,u.default)(f.default.getMutableGuildAndPrivateChannels()).values().concat(s.default.computeAllActiveJoinedThreads()).filter((function(e){var n=e.id;return n!==t&&n!==r&&m.default.getMentionCount(n)>0
})).map((function(e){return Y(e.id)})).filter(S.isNotNullish).value();if(h.length>0){l.push((0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_MENTIONS));l=l.concat(h)}if(null!=e){var _=y.default.getSelectableChannelIds(e).filter((function(e){var n=f.default.getChannel(e);return!(null==n||e===t||e===r||R.default.isChannelMuted(n.guild_id,e)||null!=n.parent_id&&R.default.isChannelMuted(n.guild_id,n.parent_id))&&m.default.hasRelevantUnread(n)})).map((function(e){return Y(e)})).filter((function(e){return e}));Object.values(s.default.getActiveJoinedUnreadThreadsForGuild(e)).forEach((function(e){for(var t in e){var r=Y(t);null!=r&&_.push(r)}}));if(_.length>0){l.push((0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_UNREAD_CHANNELS));l=l.concat(_)}}return(0,u.default)(l).uniqBy((function(e){return e.record.id})).value()}function B(e,t){if(e.length>0)switch(x){case a.AutocompleterResultTypes.USER:var r=_.default.getGuild(T.default.getGuildId());K=[(0,
a.createHeaderResult)(null!=r?N.default.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:r.name}):N.default.Messages.QUICKSWITCHER_QUERYMODE_USERS)].concat(U(e));break;case a.AutocompleterResultTypes.TEXT_CHANNEL:K=[(0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS)].concat(U(e));break;case a.AutocompleterResultTypes.VOICE_CHANNEL:K=[(0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS)].concat(U(e));break;case a.AutocompleterResultTypes.GUILD:K=[(0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_QUERYMODE_GUILDS)].concat(U(e));break;case a.AutocompleterResultTypes.APPLICATION:K=[(0,a.createHeaderResult)(N.default.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS)].concat(U(e));break;default:K=e}else K=e;if(t!==F){F=t;Q=Math.max(t.length,Q);k=(0,a.findNextSelectedResult)(a.FindResultDirections.DOWN,-1,K)}else{var n=K[k];null!=n&&n.type===a.AutocompleterResultTypes.HEADER&&(k=(0,
a.findNextSelectedResult)(a.FindResultDirections.DOWN,k,K))}z.emitChange()}function V(e){var t,r=e.query,n=e.queryMode,u=T.default.getGuildId()||void 0,l=new Set(["user:"+d.default.getId()]);null!=u&&l.add("guild:"+u);H=null!==(t=H)&&void 0!==t?t:new a.default((function(e,t){return B(""===t.trim()?q():e,t)}),null,null!=n?100:5,{frecencyBoosters:!0,blacklist:l});F=null;Q=r.length;x=n;H.search(r)}function X(){F=null;Q=0;if(null!=H){H.destroy();H=null}}var z=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;D(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.initialize=function(){this.waitFor(h.default);this.syncWith([O.default],(function(){return!0}));G=l.default.get(j)||!1};r.isOpen=function(){return null!=H};r.getResultTotals=function(e){return null==H?0:null==e?H.results.reduce((function(e,t){return t.type!==a.AutocompleterResultTypes.HEADER?e+1:e}),0):H.results.reduce((function(t,r){return r.type===e?t+1:t
}),0)};r.channelNoticePredicate=function(e,t){var r=Date.now()-t>=b.CHANNEL_NOTICE_SHOW_DELAY;return W&&r};r.getFrequentGuilds=function(){return null!=H?H.queryGuilds("",100):null};r.getFrequentGuildsLength=function(){return null!=H?H.queryGuilds("",100).length:0};r.getProps=function(){return{theme:O.default.theme,query:null!=H?H.query:"",queryMode:x,results:K,selectedIndex:k,seenTutorial:G,maxQueryLength:Q}};return t}(g.default))(o.default,((n={})[b.ActionTypes.CONNECTION_OPEN]=function(e){var t=e.guilds,r=e.channels;W=t.length>=3||r.filter((function(e){var t=e.type;return(0,c.isPrivate)(t)})).length>=20},n[b.ActionTypes.QUICKSWITCHER_SHOW]=V,n[b.ActionTypes.SHOW_ACTION_SHEET_QUICK_SWITCHER]=V,n[b.ActionTypes.QUICKSWITCHER_HIDE]=X,n[b.ActionTypes.OVERLAY_SET_INPUT_LOCKED]=X,n[b.ActionTypes.HIDE_ACTION_SHEET_QUICK_SWITCHER]=X,n[b.ActionTypes.QUICKSWITCHER_SEARCH]=function(e){var t=e.query,r=e.queryMode;if(null==H)return!1;var n=T.default.getGuildId()||null;if(x!==r){
H.setResultTypes(null!=r?[r]:null);H.setLimit(null!=r?100:5);var u=T.default.getGuildId()||void 0;r===a.AutocompleterResultTypes.USER&&null!=u?H.setOptions({userFilters:{guild:u,friends:!0}},!0):r===a.AutocompleterResultTypes.VOICE_CHANNEL?H.setOptions({voiceChannelGuildFilter:null},!0):H.setOptions({userFilters:null,voiceChannelGuildFilter:void 0},!0)}x=r;H.search(t,x===a.AutocompleterResultTypes.USER?n:void 0)},n[b.ActionTypes.QUICKSWITCHER_SELECT]=function(e){k=e.selectedIndex},n[b.ActionTypes.QUICKSWITCHER_SWITCH_TO]=function(){if(G)return!1;G=!0;l.default.set(j,!0)},n)),$=z;t.default=$},676614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.LinkRecord=void 0;var n;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);t.fromPath=function(e){return new t({id:e,path:e})};function t(t){var r
;(r=e.call(this)||this).id=t.id;r.path=t.path;return r}return t}(((n=r(821896))&&n.__esModule?n:{default:n}).default);t.LinkRecord=l;var o=l;t.default=o},126208:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,u=p(r(536211)),l=p(r(972247)),o=p(r(636602)),a=p(r(71319)),i=p(r(644263)),s=p(r(30098)),c=p(r(211136)),d=p(r(790597)),f=r(770348);function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var _="selectedChannelGuildFrecency",v=new a.default((function(){return 100}),(function(e){var t=0;0===e?t=100:e>=1&&e<2?t=70:e>=2&&e<4?t=50:e>=4&&e<7?t=30:e>=7&&(t=10);return t}),(function(e){var t,r
;return null!==(t=null!==(r=s.default.getGuild(e))&&void 0!==r?r:i.default.getChannel(e))&&void 0!==t?t:i.default.getChannel(i.default.getDMFromUserId(e))}),(function(e){__OVERLAY__||l.default.set(_,e)}),100,10),m=null,A=null;function C(e){var t=e.guildId,r=e.channelId;if(r!==m){m=r||null;null!=r&&v.track(r)}if(null!=t&&t!==A){A=t;v.track(t)}return!1}function T(){v.markDirty();return!1}var R=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;h(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.initialize=function(){this.waitFor(d.default,c.default);var e=l.default.get(_,null);null!=e&&v.overwriteHistory(e)};r.getFrequently=function(){return v.frequently};r.getScore=function(e){var t;return null!==(t=v.getFrecency(e))&&void 0!==t?t:0};r.getScoreForDM=function(e){var t=i.default.getDMFromUserId(e);return null!=t?this.getScore(t):0};r.getMaxScore=function(){return 1e3};r.getBonusScore=function(){return 100}
;!function(e,t,r){t&&y(e.prototype,t);r&&y(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"frecency",get:function(){return v}}]);return t}(u.default.Store))(o.default,((n={})[f.ActionTypes.CONNECTION_OPEN]=T,n[f.ActionTypes.OVERLAY_INITIALIZE]=T,n[f.ActionTypes.VOICE_CHANNEL_SELECT]=C,n[f.ActionTypes.CHANNEL_SELECT]=C,n));t.default=R},298698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n;function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;u(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.channelNoticePredicate=function(e,t){0;return!1};return t}(((n=r(536211))&&n.__esModule?n:{default:n}).default.Store);t.default=l},223367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,u,l,o,a=m(r(536211)),i=m(r(636602)),s=v(r(334007)),c=m(r(191839)),d=m(r(834162)),f=r(811076),p=r(864489),y=v(r(324033)),h=r(770348);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}function m(e){return e&&e.__esModule?e:{default:e}}function A(e,t){A=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return A(e,t)}function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r)
;if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R=new(function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;A(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.initialize=function(){p.isPlatformEmbedded&&y.init();u={};l=new Set;o=[]};r.getState=function(e,t){
var r=(0,f.getComboId)(e,t);return u[r]};r.isSyncing=function(e,t){var r=(0,f.getComboId)(e,t);return l.has(r)};return t}(a.default.Store))(i.default,((n={})[h.ActionTypes.GAME_CLOUD_SYNC_START]=function(e){var t=e.applicationId,r=e.branchId,n=(0,f.getComboId)(t,r);l.add(n)},n[h.ActionTypes.GAME_CLOUD_SYNC_UPDATE]=function(e){for(var t=e.state,r=0,n=Object.keys(t);r<n.length;r++){var l=n[r];u[l]=t[l]}},n[h.ActionTypes.GAME_CLOUD_SYNC_COMPLETE]=function(e){var t=e.applicationId,r=e.branchId,n=(0,f.getComboId)(t,r);l.delete(n);u[n]={type:h.CloudSyncStateTypes.DONE,timestamp:Date.now()};return!0},n[h.ActionTypes.GAME_CLOUD_SYNC_CONFLICT]=function(e){var t=e.applicationId,r=e.branchId,n=e.next,o=e.remote,a=(0,f.getComboId)(t,r);u[a]={type:h.CloudSyncStateTypes.CONFLICT,next:n,remote:o};l.delete(a)},n[h.ActionTypes.GAME_CLOUD_SYNC_ERROR]=function(e){var t=e.applicationId,r=e.branchId,n=(0,f.getComboId)(t,r);u[n]={type:h.CloudSyncStateTypes.ERROR};l.delete(n)},
n[h.ActionTypes.RUNNING_GAMES_CHANGE]=function(){for(var e,t=d.default.getRunningDiscordApplicationIds(),r=function(){var t=e.value,r=c.default.getActiveLibraryApplication(t);if(null==r)return"continue";i.default.wait((function(){try{s.sync(r.id,r.branchId)}catch(e){}}))},n=C(o.filter((function(e){return!t.includes(e)})));!(e=n()).done;)r();o=t;return!1},n));t.default=R},324033:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.init=function(){return m.apply(this,arguments)};t.syncApplication=function(e,t,r){var l;void 0===r&&(r=null);if(!s.default.supportsCloudSync(e,t))return Promise.resolve({type:p.CloudSyncResultTypes.NONE});var o=function(){if(null==n)throw new Error("Initialize cloud sync module before syncing.");return n}(),d=s.default.getState(e,t);if(null==d)throw new Error("No dispatch state for "+e+":"+t);var f=null!==(l=d.storage)&&void 0!==l?l:{},y=(0,c.getComboId)(e,t),h=i.default.getToken()
;if(null==h)throw new Error("Cannot use cloud sync when not authenticated.");var _=null!=d.installPath?(0,a.default)(d.installPath):null;if(null==_)throw new Error("No install path for "+e+":"+t);var v=i.default.getId(),m={forceHash:r,manifestPath:p.DefaultCloudSyncConfiguration.STORAGE_MANIFEST(_,v),roots:null!=f.roots?f.roots:[{id:p.DefaultCloudSyncConfiguration.ROOT_ID,paths:Object.keys(p.DefaultCloudSyncConfiguration.ROOT_PLATFORMS).map((function(e){return{platform:e,path:p.DefaultCloudSyncConfiguration.ROOT_STORAGE_PATH(_,v)}})),patterns:p.DefaultCloudSyncConfiguration.ROOT_PATTERN}],storage:{baseURL:""+u.default.getAPIBaseURL()+p.Endpoints.APPLICATION_STORAGE(e,t),token:h},replacements:{INSTALLDIR:p.DefaultCloudSyncConfiguration.INSTALL_DIR(_),USERID:v,BRANCHID:t}};return o.sync(y,m)};var n,u=y(r(118915)),l=y(r(636602)),o=y(r(791548)),a=y(r(536958)),i=y(r(423046)),s=y(r(432310)),c=r(811076),d=r(864489),f=y(r(922629)),p=r(770348);function y(e){return e&&e.__esModule?e:{default:e}}
function h(e,t,r,n,u,l,o){try{var a=e[l](o),i=a.value}catch(e){r(e);return}a.done?t(i):Promise.resolve(i).then(n,u)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var l=e.apply(t,r);function o(e){h(l,n,u,o,a,"next",e)}function a(e){h(l,n,u,o,a,"throw",e)}o(void 0)}))}}function v(){return d.isPlatformEmbedded&&((0,d.isOSX)()||(0,d.isWindows)())}function m(){return(m=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=2;break}return e.abrupt("return");case 2:if(v()){e.next=5;break}new o.default("CloudSyncUtils").warn("CloudSync is not supported on this platform");return e.abrupt("return");case 5:e.next=7;return f.default.ensureModule("discord_cloudsync");case 7:t=f.default.getCloudSync();(n=new t).on("state",(function(e){return l.default.dispatch({type:p.ActionTypes.GAME_CLOUD_SYNC_UPDATE,state:e})}));case 10:case"end":return e.stop()}}),e)
})))).apply(this,arguments)}},756473:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=function(e,t,i,s,d){var p=o.default.getInstallationPath(e.id,t),y=null!=e.eulaId&&!l.default.hasAcceptedEULA(e.eulaId);null==p||y?(0,a.openModalLazy)(f(regeneratorRuntime.mark((function u(){var l,o;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:u.next=2;return Promise.all([r.e(40532),r.e(35666),r.e(54587),r.e(32660),r.e(96906),r.e(24704),r.e(46616),r.e(6379),r.e(55809),r.e(61801),r.e(62764),r.e(23046),r.e(86683),r.e(50938),r.e(1272),r.e(66128),r.e(44461),r.e(44784),r.e(14217),r.e(65905)]).then(r.bind(r,665905));case 2:l=u.sent;o=l.default;return u.abrupt("return",(function(r){return n.createElement(o,c({},r,{applicationId:e.id,branchId:t,analyticsLocation:d}))}));case 5:case"end":return u.stop()}}),u)})))):(0,u.installApplication)(e,t,i,s,p,d)};var n=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(27555),l=i(r(421558)),o=i(r(979285)),a=r(194322);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return c.apply(this,arguments)}function d(e,t,r,n,u,l,o){try{var a=e[l](o),i=a.value}catch(e){r(e);return}a.done?t(i):Promise.resolve(i).then(n,u)}function f(e){return function(){
var t=this,r=arguments;return new Promise((function(n,u){var l=e.apply(t,r);function o(e){d(l,n,u,o,a,"next",e)}function a(e){d(l,n,u,o,a,"throw",e)}o(void 0)}))}}},409873:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.installApplication=y;t.performDefaultLibraryApplicationAction=function(e,t){var r=(0,a.getDefaultLibraryApplicationAction)(e,i.default,s.default),n=t.analyticsParams;switch(r){case d.LibraryApplicationActions.PLAY:return(0,u.playApplication)(e.id,e,{analyticsParams:n});case d.LibraryApplicationActions.INSTALL:return y(e.id,e.branchId,n.source);case d.LibraryApplicationActions.UPDATE:return h(e.id,e.branchId)}};Object.defineProperty(t,"playApplication",{enumerable:!0,get:function(){return u.playApplication}});t.repairApplication=function(e,t,r){var u=l.default.getGame(e);if(null==u)return;return n.repairApplication(u,t,r)};t.updateApplication=h;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{
default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e;r&&r.set(e,n);return n}(r(27555)),u=r(107974),l=f(r(288356)),o=f(r(125150)),a=r(440815),i=f(r(432310)),s=f(r(693399)),c=r(756473),d=r(770348);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e,t,r){var n=l.default.getGame(e);if(null!=n){var u=o.default.getTargetBuildId(n.id,t),a=o.default.getTargetManifests(n.id,t);null!=u&&null!=a&&null!=c.installApplication&&(0,c.installApplication)(n,t,u,a,r)}}function h(e,t){var r=l.default.getGame(e)
;if(null!=r)return n.updateApplication(r,t,o.default.getTargetBuildId(r.id,t),o.default.getTargetManifests(r.id,t))}}}]);
//# sourceMappingURL=b53c53ab9e2683b5e3cc.js.map